# TinyCalc

一个使用 Rust 和 egui 框架开发的轻量级桌面计算器应用程序。

## 功能特性

- 🧮 **基础运算**: 支持加法(+)、减法(-)、乘法(*)、除法(/)运算
- 📊 **百分比计算**: 支持取模(%)运算
- 🔢 **小数运算**: 支持小数点运算，智能格式化显示结果
- ➕➖ **正负切换**: 支持 +/- 按钮切换数字正负号
- 🗑️ **输入控制**: 
  - AC (全部清除) - 清空所有输入和计算结果
  - DEL (删除) - 删除最后一个输入字符
- 🎨 **现代化界面**: 
  - 深色主题设计
  - 按钮按压动画效果
  - 清晰的数字显示区域
- ⚡ **实时计算**: 按下等号(=)即时显示计算结果

## 技术栈

- **语言**: Rust 2024 Edition
- **GUI框架**: [egui](https://github.com/emilk/egui) v0.32.1
- **应用框架**: [eframe](https://github.com/emilk/egui/tree/master/crates/eframe) v0.32.1
- **额外组件**: egui_extras v0.32.1

## 项目结构

```
tinycalc/
├── src/
│   └── main.rs          # 主程序文件
├── Cargo.toml           # 项目配置和依赖
└── README.md            # 项目说明文档
```

## 快速开始

### 环境要求

- Rust 1.70+ (推荐使用最新稳定版)
- Cargo (Rust 包管理器)

### 安装和运行

1. **克隆项目**
   ```bash
   git clone <repository-url>
   cd tinycalc
   ```

2. **编译项目**
   ```bash
   cargo build --release
   ```

3. **运行应用**
   ```bash
   cargo run
   ```

### 开发模式运行

```bash
# 开发模式运行（包含调试信息）
cargo run

# 检查代码
cargo check

# 运行测试
cargo test
```

## 使用说明

### 基本操作

1. **数字输入**: 点击数字按钮 (0-9) 输入数字
2. **运算符**: 点击 +、-、*、/ 进行基本运算
3. **小数点**: 点击 . 输入小数
4. **计算结果**: 点击 = 显示计算结果
5. **清除操作**: 
   - 点击 AC 清空所有内容
   - 点击 DEL 删除最后一个字符
6. **正负切换**: 点击 +/- 切换当前数字的正负号
7. **取模**: 点击 % 进行取模运算

### 界面布局

- **结果显示区**: 顶部深色区域显示当前输入和计算结果
- **按钮区域**: 4×5 网格布局的按钮，包含数字、运算符和功能按钮

## 技术实现

### 核心特性

- **递归下降解析器**: 实现了完整的数学表达式解析和计算
- **运算符优先级**: 正确处理乘除法优先于加减法的运算顺序
- **错误处理**: 优雅处理除零、无效表达式等错误情况
- **数字格式化**: 智能显示整数和小数，自动去除多余的零
- **状态管理**: 完善的计算器状态管理，支持连续计算

### 代码架构

- `TinyCalc` 结构体: 主要的应用程序状态管理
- `result_block()`: 结果显示区域渲染
- `input_block()`: 按钮区域渲染和交互处理
- `evaluate_expression()`: 表达式计算引擎
- `parse_*()` 系列函数: 递归下降解析器实现

## 构建配置

### 发布构建

```bash
# 优化构建用于发布
cargo build --release

# 生成的可执行文件位于
# target/release/tinycalc (Linux/macOS)
# target/release/tinycalc.exe (Windows)
```
## 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情。

## 更新日志

### v0.1.0
- ✨ 初始版本发布
- ✅ 基础四则运算功能
- ✅ 现代化 GUI 界面
- ✅ 按钮动画效果
- ✅ 正负号切换
